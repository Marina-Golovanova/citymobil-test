{"version":3,"sources":["components/header/Header.tsx","components/sidebar/Sidebar.tsx","components/input-search/InputSearch.tsx","components/button/Button.tsx","api.ts","constants.ts","components/sort-control/SortControl.tsx","components/loader/Loader.tsx","components/table/Table.tsx","components/scroll-to-top-button/ScrollToTopButton.tsx","components/input-readonly/InputReadonly.tsx","components/main-content/MainContent.tsx","components/footer/Footer.tsx","components/page-layout/PageLayout.tsx","components/App/App.tsx","index.tsx"],"names":["Header","className","Sidebar","InputSearch","props","React","useState","inputValue","setInputValue","onInput","useEffect","placeholder","onChange","e","target","value","toLowerCase","onKeyPress","key","onEnter","viewBox","fill","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","Button","onClick","onButton","text","api","getCars","a","fetch","process","res","ok","json","data","camelcase","deep","Error","SortControl","sortBy","Loader","Table","setData","isLoading","setIsLoading","sortKey","setSortKey","sortByAsc","setSortByAsc","filteredData","setFilteredData","addToast","useToasts","then","catch","message","appearance","sortedData","search","cars","filter","car","mark","model","includes","sort","b","dir","tariffs","year","onTitleClick","title","tariffsList","map","el","onChooseCar","tariff","ScrollToTopButton","window","scrollTo","top","behavior","InputReadonly","MainContent","showButtonForScroll","setShowButtonToScroll","setSearch","searchValue","setSearchValue","chosenCar","setChosenCar","onscroll","scrollY","onSearch","Footer","PageLayout","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2541f4e5.chunk.js","sourcesContent":["import React from \"react\";\n\nimport \"./header.scss\";\n\nexport const Header: React.FC = () => {\n  return <div className=\"header\">header</div>;\n};\n","import React from \"react\";\n\nimport \"./sidebar.scss\";\n\nexport const Sidebar: React.FC = () => {\n  return <div className=\"sidebar\">sidebar</div>;\n};\n","import React from \"react\";\n\nimport \"./input-search.scss\";\n\ntype InputSearchProps = {\n  onInput: (search: string) => void;\n  onEnter: (search: string) => void;\n};\n\nexport const InputSearch: React.FC<InputSearchProps> = (props) => {\n  const [inputValue, setInputValue] = React.useState(\"\");\n  const { onInput } = props;\n\n  const onChangeInput = (e: React.ChangeEvent) => {\n    const target = e.target as HTMLInputElement;\n    setInputValue(target.value.toLowerCase());\n  };\n\n  React.useEffect(() => {\n    onInput(inputValue);\n  }, [inputValue, onInput]);\n\n  const onKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === \"Enter\") {\n      props.onEnter(inputValue);\n    }\n  };\n\n  return (\n    <div className=\"input-layout\">\n      <input\n        className=\"input-layout__field\"\n        placeholder=\"Поиск\"\n        onChange={onChangeInput}\n        onKeyPress={onKeyPress}\n      />\n      <svg className=\"input-layout__icon\" viewBox=\"0 0 16 16\" fill=\"none\">\n        <path\n          d=\"M9.58388 3.36469C11.268 5.04878 11.268 7.77924 9.58388 9.46333C7.89978 11.1474 5.16933 11.1474 3.48524 9.46333C1.80114 7.77924 1.80114 5.04878 3.48524 3.36469C5.16933 1.6806 7.89978 1.6806 9.58388 3.36469\"\n          stroke=\"#7B8395\"\n          strokeWidth=\"1.625\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n        />\n        <path\n          d=\"M9.55273 9.48819L13.7777 13.771\"\n          stroke=\"#7B8395\"\n          strokeWidth=\"1.625\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n        />\n      </svg>\n    </div>\n  );\n};\n","import React from \"react\";\n\nimport \"./button.scss\";\n\ntype ButtonProps = { text: string; onButton: () => void };\n\nexport const Button: React.FC<ButtonProps> = (props) => {\n  return (\n    <button className=\"button\" onClick={props.onButton}>\n      {props.text}\n    </button>\n  );\n};\n","import camelcase from \"camelcase-keys\";\nimport { Data } from \"./type\";\nimport { SERVER_URL } from \"./constants\";\n\nexport const api = {\n  getCars: async (): Promise<Data> => {\n    const res = await fetch(`${SERVER_URL}/api/cars`);\n\n    if (res.ok) {\n      const data = await res.json();\n\n      return camelcase(data, { deep: true });\n    }\n\n    throw new Error(\"Something went wrong\");\n  },\n};\n","export const SERVER_URL = process.env.REACT_APP_SERVER_URL as string;\n","import React from \"react\";\n\nimport \"./sort-control.scss\";\n\ntype SortControlProps = {\n  sortBy?: \"asc\" | \"desc\" | null;\n};\n\nexport const SortControl: React.FC<SortControlProps> = (props) => {\n  return (\n    <svg className={`sort-control ${props.sortBy}`} viewBox=\"0 0 12 14\">\n      <path\n        d=\"M11.8333 5.5H8.49996V0.5H3.49996V5.5H0.166626L5.99996 11.3333L11.8333 5.5ZM0.166626 13V14.6667H11.8333V13H0.166626Z\"\n        fill=\"#7B8395\"\n      />\n    </svg>\n  );\n};\n","import React from \"react\";\n\nimport \"./loader.scss\";\n\nexport const Loader: React.FC = () => {\n  return (\n    <div className=\"ph-item\">\n      <div className=\"ph-col-12\">\n        <div className=\"ph-row\">\n          <div className=\"ph-col-12 big\" />\n          <div className=\"ph-col-12 big\" />\n          <div className=\"ph-col-12 big\" />\n          <div className=\"ph-col-12 big\" />\n          <div className=\"ph-col-12 big\" />\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { useToasts } from \"react-toast-notifications\";\nimport { api } from \"../../api\";\nimport { Data, Car } from \"../../type\";\nimport { SortControl } from \"../sort-control/SortControl\";\nimport { Loader } from \"../loader/Loader\";\n\nimport \"./table.scss\";\n\ntype TableProps = {\n  search: string;\n  onChooseCar: (car: Car, year: number) => void;\n};\n\nexport const Table: React.FC<TableProps> = (props) => {\n  const [data, setData] = React.useState<Data>();\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [sortKey, setSortKey] = React.useState(\"mark\");\n  const [sortByAsc, setSortByAsc] = React.useState(true);\n  const [filteredData, setFilteredData] = React.useState<Data>();\n\n  const { addToast } = useToasts();\n\n  React.useEffect(() => {\n    setIsLoading(true);\n\n    api\n      .getCars()\n      .then((res) => {\n        setIsLoading(false);\n        setData(res);\n      })\n      .catch((e) => {\n        addToast(e.message, { appearance: \"error\" });\n        setIsLoading(false);\n      });\n  }, [addToast]);\n\n  React.useEffect(() => {\n    if (!data) {\n      return;\n    }\n\n    const sortedData = { ...data };\n\n    if (props.search) {\n      sortedData.cars = sortedData.cars.filter((car) =>\n        `${car.mark} ${car.model}`.toLowerCase().includes(props.search)\n      );\n    }\n\n    sortedData.cars = sortedData.cars.sort((a, b) => {\n      const dir = sortByAsc ? 1 : -1;\n\n      return sortKey === \"mark\"\n        ? (`${a.mark} ${a.model}` > `${b.mark} ${b.model}` ? 1 : -1) * dir\n        : ((a.tariffs[sortKey]?.year || 0) > (b.tariffs[sortKey]?.year || 0)\n            ? 1\n            : -1) * dir;\n    });\n\n    setFilteredData(sortedData);\n  }, [data, props.search, sortByAsc, sortKey]);\n\n  const onTitleClick = async (title: string) => {\n    if (sortKey === title) {\n      setSortByAsc(!sortByAsc);\n    } else {\n      setSortByAsc(true);\n    }\n\n    setSortKey(title);\n  };\n\n  if (isLoading) {\n    return <Loader />;\n  }\n\n  return (\n    <div className=\"table\">\n      <div className=\"table__row\">\n        {data && (\n          <>\n            <div className=\"table__title\" onClick={() => onTitleClick(\"mark\")}>\n              Марка и модель\n              <SortControl\n                sortBy={\n                  sortKey === \"mark\" ? (sortByAsc ? \"asc\" : \"desc\") : null\n                }\n              />\n            </div>\n            {data.tariffsList.map((el) => (\n              <div\n                className=\"table__title\"\n                key={el}\n                onClick={() => onTitleClick(el.toLowerCase())}\n              >\n                {el}\n                <SortControl\n                  sortBy={\n                    sortKey === el.toLowerCase()\n                      ? sortByAsc\n                        ? \"asc\"\n                        : \"desc\"\n                      : null\n                  }\n                />\n              </div>\n            ))}\n          </>\n        )}\n      </div>\n      {filteredData &&\n        filteredData.cars.map((el) => (\n          <div className=\"table__row\" key={`${el.mark} ${el.model}`}>\n            <div\n              className=\"table__cell\"\n              onClick={() => props.onChooseCar(el, 0)}\n            >{`${el.mark} ${el.model}`}</div>\n            {filteredData.tariffsList.map((tariff) => (\n              <div\n                className=\"table__cell\"\n                key={tariff}\n                onClick={() =>\n                  props.onChooseCar(\n                    el,\n                    el.tariffs[tariff.toLowerCase()]\n                      ? el.tariffs[tariff.toLowerCase()].year\n                      : 0\n                  )\n                }\n              >\n                {el.tariffs[tariff.toLowerCase()]?.year || \"—\"}\n              </div>\n            ))}\n          </div>\n        ))}\n    </div>\n  );\n};\n","import React from \"react\";\n\nimport \"./scroll-to-top-button.scss\";\n\nexport const ScrollToTopButton: React.FC = () => {\n  return (\n    <button\n      className=\"scroll-to-top-button\"\n      onClick={() =>\n        window.scrollTo({\n          top: 0,\n          behavior: \"smooth\",\n        })\n      }\n    >\n      <svg className=\"scroll-to-top-button__icon\" viewBox=\"0 0 451.847 451.847\">\n        <path d=\"M225.923,354.706c-8.098,0-16.195-3.092-22.369-9.263L9.27,151.157c-12.359-12.359-12.359-32.397,0-44.751   c12.354-12.354,32.388-12.354,44.748,0l171.905,171.915l171.906-171.909c12.359-12.354,32.391-12.354,44.744,0   c12.365,12.354,12.365,32.392,0,44.751L248.292,345.449C242.115,351.621,234.018,354.706,225.923,354.706z\" />\n      </svg>\n    </button>\n  );\n};\n","import React from \"react\";\n\nimport \"./input-readonly.scss\";\n\ntype InputReadonlyProps = { text: string };\n\nexport const InputReadonly: React.FC<InputReadonlyProps> = (props) => {\n  return <div className=\"input-readonly\">{props.text}</div>;\n};\n","import React from \"react\";\nimport { InputSearch } from \"../input-search/InputSearch\";\nimport { Button } from \"../button/Button\";\nimport { Table } from \"../table/Table\";\nimport { ScrollToTopButton } from \"../scroll-to-top-button/ScrollToTopButton\";\nimport { Car } from \"../../type\";\nimport { InputReadonly } from \"../input-readonly/InputReadonly\";\n\nimport \"./main-content.scss\";\n\ntype ChosenCar = { car: Car; year: number };\n\nexport const MainContent: React.FC = () => {\n  const [showButtonForScroll, setShowButtonToScroll] = React.useState(false);\n  const [search, setSearch] = React.useState<string>(\"\");\n  const [searchValue, setSearchValue] = React.useState(\"\");\n  const [chosenCar, setChosenCar] = React.useState<ChosenCar>();\n\n  window.onscroll = () => {\n    window.scrollY > 300\n      ? setShowButtonToScroll(true)\n      : setShowButtonToScroll(false);\n  };\n\n  const onSearch = () => {\n    setSearchValue(search);\n  };\n\n  const onInput = (search: string) => {\n    if (!search) {\n      setSearchValue(\"\");\n    } else {\n      setSearch(search);\n    }\n  };\n\n  return (\n    <div className=\"main-content\">\n      <div className=\"main-content__search-layout\">\n        <div className=\"main-content__search\">\n          <InputSearch onInput={onInput} onEnter={onSearch} />\n          <Button text=\"Найти\" onButton={onSearch} />\n        </div>\n      </div>\n      <Table\n        search={searchValue}\n        onChooseCar={(car, year) => setChosenCar({ car, year })}\n      />\n      {showButtonForScroll && <ScrollToTopButton />}\n      <InputReadonly\n        text={\n          chosenCar?.year\n            ? `Выбран автомобиль ${chosenCar.car.mark} ${chosenCar.car.model} ${chosenCar.year} года выпуска`\n            : \"Автомобиль не выбран\"\n        }\n      />\n    </div>\n  );\n};\n","import React from \"react\";\n\nimport \"./footer.scss\";\n\nexport const Footer: React.FC = () => {\n  return <div className=\"footer\">footer</div>;\n};\n","import React from \"react\";\nimport { Header } from \"../header/Header\";\nimport { Sidebar } from \"../sidebar/Sidebar\";\nimport { MainContent } from \"../main-content/MainContent\";\nimport { Footer } from \"../footer/Footer\";\n\nimport \"./page-layout.scss\";\n\nexport const PageLayout: React.FC = () => {\n  return (\n    <div className=\"page-layout\">\n      <Header />\n      <Sidebar />\n      <MainContent />\n      <Footer />\n    </div>\n  );\n};\n","import React from \"react\";\nimport { ToastProvider } from \"react-toast-notifications\";\nimport { PageLayout } from \"../page-layout/PageLayout\";\n\nimport \"./App.scss\";\n\nexport const App: React.FC = () => {\n  return (\n    <ToastProvider>\n      <PageLayout />\n    </ToastProvider>\n  );\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { App } from \"./components/App/App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}